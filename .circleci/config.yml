# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1

orbs:
  # test-first-orb: sonhmle-space/test-first-orb@3.1.0
  test-publish-orb: lhmson-space/test-publish-orb@1.0.1

# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
  main:
    jobs:
      - test-publish-orb/upload-app:
          KOBITON_APP_ACCESS: private
          KOBITON_APP_NAME: 'Ios test'
          KOBITON_APP_PATH: ../demo/ios-test.ipa
          KOBITON_APP_TYPE: ipa
      - test-publish-orb/execute-test:
          KOBITON_GIT_REPO_URL: 'https://github.com/sonhmle/azure-devops-sample-java-prod.git'
          KOBITON_GIT_REPO_BRANCH: 'master'
          KOBITON_EXECUTOR_URL: 'https://executor-demo.kobiton.com'
          KOBITON_USE_CUSTOM_DEVICE: 'true'
          KOBITON_DEVICE_NAME: 'Galaxy A20s'
          KOBITON_DEVICE_PLATFORM: 'android'
          KOBITON_DEVICE_PLATFORM_VERSION: '10'


